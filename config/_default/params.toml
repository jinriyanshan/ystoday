# 网站图标
favicon = "img/jryslogo.jpg"

[footer]
    # 删掉 since 这一行，年份就不会显示了
    customText = "燕山旧时光"

[sidebar]
    emoji = ""
    subtitle = "回望过去，憧憬未来......"
    avatar = "img/cat1.jpg" 

[article]
    readingTime = false
    [article.license]
        enabled = false  # 关闭文章底部的英文授权

[colorScheme]
    toggle = false      # 彻底关掉切换按钮
    default = "auto"

[widgets]
    homepage = [
        { type = "search" },
        { type = "archives", params = { limit = 5 } }
    ]
    page = [{ type = "toc" }]

[comments]
    enabled  = false
    provider = "giscus"

    [comments.giscus]
        repo = "jinriyanshan/ystoday"
        repoId = "R_kgDORIoO7g"
        category = "General"
        categoryId = "DIC_kwDORIoO7s4C1-Yt"
        mapping = "pathname"
        strict = "0"
        reactionsEnabled = "1"
        emitMetadata = "0"
        inputPosition = "bottom"
        theme = "preferred_color_scheme"
        lang = "zh-CN"

# 全局嵌入 Waline 评论区 + 隐藏 Giscus（修正版）
customHead = '''
<style>
  .giscus, #giscus_thread, iframe[src*="giscus"] {
    display: none !important;
    visibility: hidden !important;
  }
  #waline {
    margin-top: 2rem;
    padding: 1rem;
    width: 100%;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }
</style>
<script type="module">
  // 等页面完全加载后再创建评论区
  document.addEventListener('DOMContentLoaded', function() {
    // 1. 创建 Waline 容器并放到页面底部
    const walineContainer = document.createElement('div');
    walineContainer.id = 'waline';
    // 把评论区放到页面主内容后面（或body末尾）
    const mainContent = document.querySelector('main') || document.body;
    mainContent.appendChild(walineContainer);

    // 2. 初始化 Waline
    import("https://unpkg.com/@waline/client@v3/dist/waline.mjs").then(({ init }) => {
      init({
        el: "#waline",
        serverURL: "https://waline-server-bay-two.vercel.app",
        dark: "auto",
        locale: {
          placeholder: "欢迎在燕山旧时光留言～",
          nick: "昵称",
          mail: "邮箱（选填）",
          link: "网址（选填）",
          submit: "提交评论",
        },
      });
    });
  });
</script>
'''
